---
- name: "Clone dotfiles configuration"
  ansible.builtin.git:
    repo: "https://github.com/Leninner/dotfiles.git"
    dest: "/home/{{ user }}/dotfiles/"
    force: yes
    accept_hostkey: true
    update: yes
  tags: dotfiles

- name: "Add configuration files"
  become: true
  shell: ln -s /home/{{ user }}/dotfiles/{{ item }} /home/{{ user }}/{{ item }}
  with_items: [".zshrc", ".p10k.zsh"]
  tags: dotfiles

- name: Source zshrc
  become: true
  shell: source /home/{{ user }}/.zshrc
  tags: dotfiles
